<% @project_application.each do |p|%>
   <% if p.project.closed? && p.rejected? || p.project.closed? && p.pending?%>
   <%elsif professional_signed_in? && current_professional.id == p.professional_id%>
        <div>
          <p>Projeto: <%= p.project.title%></p>
          <p>Introdução <%= p.introduction%></p>
        </div>     
    <% end %> 
  <% if professional_signed_in? && current_professional.id == p.professional_id && p.pending? && p.project.active? %> 
      <p class="alert alert-primary" role="alert">Sua candidatura está pendente</p>
  <% elsif professional_signed_in? && current_professional.id == p.professional_id  && p.accepted?  %>
      <p class="alert alert-success" role="alert"> Sua candidatura foi aceita! </p>
  <%elsif professional_signed_in? && current_professional.id == p.professional_id  && p.rejected? && p.project.active? %>
      <p class="alert alert-danger" role="alert">Sua candidatura foi recusada mas não desanime! Temos muitos projetos que encaixam no seu perfil</p>    
  <% end %>
<% end %>
  
<% if user_signed_in?%>
<p>Candidaturas</p>
  <% @project_application.each do |p|%>
    <% if user_signed_in? && current_user.id == p.project.user_id %>
        <div>
          <p>Projeto: <%= p.project.title%></p>
          <p>Introdução <%= p.introduction%></p>
          <p>Nome do profissional: <%= p.professional.profile.full_name %></p>
          <p>Data de nascimento do profissional: <%= p.professional.profile.birth_date %></p>
          <dt>Status:</dt>
          <dd><%= p.status%></dd>
          <% if p.pending?%>
            <p><%= link_to 'Aceitar', accept_project_application_path(p.id), method: :post%></p>
            <p><%= link_to 'Recusar', reject_project_application_path(p.id), method: :post%></p>
          <% end %>
        </div>
    <% end %>
  <% end %>
<% end %>
